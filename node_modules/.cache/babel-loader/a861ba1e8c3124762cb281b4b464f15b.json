{"ast":null,"code":"var _jsxFileName = \"/Users/vivi/Documents/1082/simple_web3test/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Web3 from 'web3';\nimport TodoListContract from './build/contracts/TodoList.json';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      try {\n        const web3 = new Web3(Web3.givenProvider || 'ws://localhost:8545');\n        const accounts = await web3.eth.getAccounts();\n        const networkId = await web3.eth.net.getId();\n        const deployNetwork = TodoListContract.networks[networkId];\n        const instance = new web3.eth.Contract(TodoListContract.abi, deployNetwork.address);\n        this.setState({\n          web3: web3,\n          accounts: accounts,\n          contract: instance\n        });\n      } catch (error) {\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    this.state = {\n      web3: null,\n      accounts: null,\n      contract: null\n    };\n    this.handleClick = this.handleClick.bind(this);\n  } //end constructor\n\n\n  //end componetdidmount\n  async handleClick() {\n    var res = await this.state.contract.methods.SayHello().call({\n      from: this.state.accounts[0]\n    }).then(console.log);\n    console.log(res);\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 14\n        }\n      }, \"Loading Web3, accounts, and contract...\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, \"Hi\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, \"Click here\"));\n  }\n\n}\n\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 17\n  }\n}), document.getElementById('root'));","map":{"version":3,"sources":["/Users/vivi/Documents/1082/simple_web3test/src/index.js"],"names":["React","ReactDOM","Web3","TodoListContract","App","Component","constructor","props","componentDidMount","web3","givenProvider","accounts","eth","getAccounts","networkId","net","getId","deployNetwork","networks","instance","Contract","abi","address","setState","contract","error","alert","console","state","handleClick","bind","res","methods","SayHello","call","from","then","log","render","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;;AACA,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,SASlBC,iBATkB,GASE,YAAY;AAC9B,UAAI;AACF,cAAMC,IAAI,GAAG,IAAIP,IAAJ,CAASA,IAAI,CAACQ,aAAL,IAAsB,qBAA/B,CAAb;AACA,cAAMC,QAAQ,GAAG,MAAMF,IAAI,CAACG,GAAL,CAASC,WAAT,EAAvB;AACA,cAAMC,SAAS,GAAG,MAAML,IAAI,CAACG,GAAL,CAASG,GAAT,CAAaC,KAAb,EAAxB;AAEA,cAAMC,aAAa,GAAGd,gBAAgB,CAACe,QAAjB,CAA0BJ,SAA1B,CAAtB;AACA,cAAMK,QAAQ,GAAG,IAAIV,IAAI,CAACG,GAAL,CAASQ,QAAb,CACfjB,gBAAgB,CAACkB,GADF,EAEfJ,aAAa,CAACK,OAFC,CAAjB;AAIA,aAAKC,QAAL,CAAc;AACZd,UAAAA,IAAI,EAAEA,IADM;AAEZE,UAAAA,QAAQ,EAAEA,QAFE;AAGZa,UAAAA,QAAQ,EAAEL;AAHE,SAAd;AAKD,OAfD,CAeE,OAAOM,KAAP,EAAc;AACdC,QAAAA,KAAK,CACF,wEADE,CAAL;AAGAC,QAAAA,OAAO,CAACF,KAAR,CAAcA,KAAd;AACD;AACF,KA/BiB;;AAEhB,SAAKG,KAAL,GAAa;AACXnB,MAAAA,IAAI,EAAE,IADK;AAEXE,MAAAA,QAAQ,EAAE,IAFC;AAGXa,MAAAA,QAAQ,EAAE;AAHC,KAAb;AAKA,SAAKK,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACD,GAT+B,CAS/B;;;AAuBC;AACF,QAAMD,WAAN,GAAmB;AACjB,QAAIE,GAAG,GAAG,MAAM,KAAKH,KAAL,CAAWJ,QAAX,CAAoBQ,OAApB,CAA4BC,QAA5B,GAAuCC,IAAvC,CAA4C;AAACC,MAAAA,IAAI,EAAE,KAAKP,KAAL,CAAWjB,QAAX,CAAoB,CAApB;AAAP,KAA5C,EAA4EyB,IAA5E,CAAiFT,OAAO,CAACU,GAAzF,CAAhB;AACAV,IAAAA,OAAO,CAACU,GAAR,CAAYN,GAAZ;AAGD;;AACDO,EAAAA,MAAM,GAAG;AACP,QAAI,CAAC,KAAKV,KAAL,CAAWnB,IAAhB,EAAsB;AACpB,0BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAAP;AACD;;AACD,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAQ,MAAA,OAAO,EAAE,KAAKoB,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,CADF;AAMD;;AAjD+B;;AAoDlC5B,QAAQ,CAACqC,MAAT,eAAgB,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAhB,EAAwBC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAxB","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Web3 from 'web3';\nimport TodoListContract from './build/contracts/TodoList.json';\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      web3: null,\n      accounts: null,\n      contract: null\n    }\n    this.handleClick = this.handleClick.bind(this);\n  }//end constructor\n  componentDidMount = async() =>  {\n    try {\n      const web3 = new Web3(Web3.givenProvider || 'ws://localhost:8545');\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n\n      const deployNetwork = TodoListContract.networks[networkId];\n      const instance = new web3.eth.Contract(\n        TodoListContract.abi,\n        deployNetwork.address\n      )\n      this.setState({\n        web3: web3,\n        accounts: accounts,\n        contract: instance\n      });\n    } catch (error) {\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`,\n      );\n      console.error(error);\n    }\n  };//end componetdidmount\n  async handleClick(){\n    var res = await this.state.contract.methods.SayHello().call({from: this.state.accounts[0]}).then(console.log);\n    console.log(res)\n  \n    \n  }\n  render() {\n    if (!this.state.web3) {\n      return <div>Loading Web3, accounts, and contract...</div>;\n    }\n    return(\n      <div>\n        <div>Hi</div>\n        <button onClick={this.handleClick}>Click here</button>\n      </div>\n    )\n  }\n} \n\nReactDOM.render(<App/>, document.getElementById('root'));\n"]},"metadata":{},"sourceType":"module"}